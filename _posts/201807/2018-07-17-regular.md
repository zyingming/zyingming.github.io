---
layout: post
title:  "常见正则表达式及基础用法总结"
date:   2018-07-17 14:42:56
categories: javascript
tags: regular
marks: regular
icon: original
author: "zyingming"
---
正则在各种表单验证中必不可少，总是记了又忘，也怕自己写的正则匹配会有疏漏，所以每次写都是百度T_T，就想写一篇总结，烂记性不如好笔头。
## 基础知识
- 初始化：`var pattern1 = / pattern / flags`创建一个正则表达式，也可以通过`var pattern2 = new RegExp(pattern, flags)`两个参数都是字符串。
- 使用：`string.match(pattern1)`，也可以是`pattern1.test(string)`

### 1. 元字符

元字符|含义
---|:--:|
`^` |匹配字符串的起始位置
`$`|匹配字符串的结尾
`\b`|匹配单词边界， `\bee\b` 匹配到ee
`\d`|匹配数字，0-9
`\w`|匹配字母，数字，下划线
`\s`|匹配空格
`[a-z]`|匹配中括号内的字符，小写字母a到z
`.`|匹配除换行符之外的字符
`[dfs]`|匹配中括号里的字符
`\xhh`|匹配编码为`hh`（两个十六进制数字）的字符。

### 2. 反义

反义字符|含义
---|:--:|
`\W`|匹配任意不是字母，数字，下划线的字符
`\S`|匹配非空白字符
`\D`|匹配任意非数字的字符
`\B`|匹配不是单词开头或结束的位置

### 3. 数量词

数量词|含义
---|:--:|
`*`|匹配0或多次
`+`|匹配1或多次，相当于`{1,}`
`?`|匹配0或1次
`x|y`|匹配x或y
`{n}`|匹配连续出现n次
`{n,}`|匹配至少出现n次
`{n,m}`|匹配至少出现n次，最多出现m次
`x(?=y)`|只有当 x 后面紧跟着 y 时，才匹配 x
`x(?!y)`|只有当 x 后面不是紧跟着 y 时，才匹配 x
`*?`和`+?`|最小可能匹配

### 4.分组
被匹配的子字符串可以在结果数组的元素 [1], ..., [n] 中找到，或在被定义的 RegExp 对象的属性 $1, ..., $9 中找到。
## 常见表达式
- 匹配手机号

```javascript
/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/
```

- 匹配8-12位含数字和字母的密码

```javascrpt

```

- 匹配邮箱

```javascript

```



## 简单应用

### 使用sublime的正则查找
正则查找是sublime所支持的，所以不需要安装任何插件，只需要在左下角打开正则匹配。

![sublime 正则](/assets/images/pictures/2018-07/reg_1.jpg)

### `textarea`评论模块
评论时输入`<script></script>`等html节点也需要被展示出来，这时候就需要转义，例如将`<ul></ul>`转成`&lt;ul&gt;&lt;/ul&gt;`，才能成功提交给后台，而不被过滤掉。

```javascript
function encodeHtml(s) {
    var REGX_HTML_ENCODE = /"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g;
    return (typeof s != "string") ? s :
        s.replace(REGX_HTML_ENCODE, function($0) {
            var c = $0.charCodeAt(0),
                r = ["&#"];
            c = (c == 0x20) ? 0xA0 : c;
            r.push(c);
            r.push(";");
            return r.join("");
        });
};

```

### 相关资料
- [在线匹配正则工具网站](https://regexper.com/#%5Cd)
- [MDN RegExp](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp)
- [正则表达式手册](http://tool.oschina.net/uploads/apidocs/jquery/regexp.html)

